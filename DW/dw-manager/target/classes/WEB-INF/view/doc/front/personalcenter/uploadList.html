<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telephone=no"/>
    @include("/common/plugins.html"){}
    @include("/common/plugins_ext.html"){}
    <!--<link rel="stylesheet" href="${ctxPath}/static/doc/manager/docmanager/css/resource-manager.css?v=${h_version}"/>-->
    <link rel="stylesheet" type="text/css" href="${ctxPath}/static/doc/manager/docmanager/css/fileinput.css?v=${h_version}"/>
    <link rel="stylesheet" href="${ctxPath}/static/assets/lib/webuploader0.1.5/webuploader.css?v=${h_version}">
    <link rel="stylesheet" type="text/css" href="${ctxPath}/static/resources/css/commonLoading.css?v=${h_version}"/>
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/upload-list.css?v=${h_version}"/>
    <link rel="stylesheet"href="${ctxPath}/static/doc/css/uploadList.css?v=${h_version}">
    <link href="${ctxPath}/static/resources/css/front/common_doc.css?v=${h_version}" type="text/css" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="${ctxPath}/static/resources/js/ajaxfileupload.js?v=${h_version}"></script>
    <link href="${ctxPath}/static/resources/css/front/common_doc.css?v=${h_version}" type="text/css" rel="stylesheet">

    <style>
        body,html{height: 100%}
        .layui-btn + .layui-btn{
            margin-left: 0px !important;
        }
        .layui-btn:hover {

        }
        .copy-div {
            margin-left: 20px;
            margin-top: 10px;
        }
        .copy-input {
            margin-top: 3px;
            float: left;
        }
        .copy-span {
            margin-left: 10px;
        }
        .copy-span:checked::after{
            background-color: #3C91FD!important;
        }
        .hideBtn{
            display: none;
        }
        #path span{margin-left: 2px}
        .layui-form-checkbox{
            border: 1px solid #d2d2d2 !important;
            border-radius: 2px;
        }
        .layui-form-checkbox i{
            border: none;
            border-radius: 0;
        }
        .layui-form-checked{
            border-color: #3C91FD!important;
            border-radius: 1px;
        }
        .layui-input:focus, .layui-textarea:focus {
            border-color: #d1deed!important;
        }
        .layui-input:hover, .layui-textarea:hover {
            border-color: #d1deed!important;
        }
        div#refreshList {
            float: right;
            margin-right: 8px;
        }
        div#refreshList .layui-icon{
            margin: 0;
        }
        .rit-menu {    margin-right: 3px;float: right;width: 90px;padding: 10px 0 0 0;margin-bottom: 10px;box-sizing: content-box;vertical-align: middle !important;height: 30px !important;line-height: 26px !important;}
        .message{height: 43px;font-size: 16px;padding: 0 0;width: calc(100% - 93px);float: left;font-weight: bold;line-height:43px;color:#333;padding-left: 10px;position: relative;}
        .message .total{display: inline-block;white-space: nowrap;word-wrap: normal;overflow: hidden;float: left;position: relative}
        .fileButtonGroup{display:inline-block;height: 43px; width: auto}
        span#amount {
            float: left;
        }
        .index-crumbs {
            width: 100%;
        }
        .layui-form-radio>i:hover, .layui-form-radioed>i {
            color: #3C91FD!important;
        }
        .layui-form-radio>i {
            margin-right: 5px!important;
        }
        .layui-form-radio>i {
            font-size: 15px!important;
        }

        #checkBox1 .layui-input-inline {
            width: 158px;
        }
    </style>
</head>
<body >
<input type="hidden" value="${onlineEditUsing !}" id="onlineEditUsing">
<input type="hidden" value="${auditUsing !}" id="auditUsing">
<input type="hidden" value="${workflowUsing ! }" id="workflowUsing">
<input type="hidden" value="${addAuth !}" id="addAuthVal">
<input type="hidden" value="${copyFold !}" id="copyFoldVal">
<div class="background clearfix" style="height: 100%">
    <div class="content  clearfix" id="uploadList">
        <div class="layui-col-md9 layui-col-sm9 con-full-r rightArea">
            <div id="marg">
                <!--  <div id="pathDiv">
                      <div id="upDiv" class="left" >
                          <img class="btnIcon" src="${ctxPath}/static/resources/img/fsfile/uplevelicongreen.png"><span id="upLevel" style="cursor: pointer;color:#26B7B1">返回上级</span>|
                      </div>
                      <div class="outer-nav"><i class="layui-icon control-btn-l">&#xe603;</i><div id="path" class="left"></div><i class="layui-icon control-btn-r">&#xe602;</i></div>
                  </div>-->
                <div class="table-top clearfix">
                    <div class="fileButtonGroup">
                        <button type="button" class="uploadBtn layui-btn hideBtn" style="background:rgba(90,163,255,1);">上传</button>
                        <button id="newFolder" class="newFolder layui-btn hideBtn">创建目录</button>
                        <button id="reName" class="newFolderNew layui-btn clickBtn hideBtn " >权限设置</button>
                        <button id="backAuth" class="newFolderNew layui-btn clickBtn hideBtn " >回收权限</button>
                        <button id="addAuth" class="newFolderNew layui-btn clickBtn hideBtn " >添加权限</button>
                        <button id="copyFold" class="newFolderNew layui-btn clickBtn hideBtn " >复制目录</button>
                        <button id="setTip" class="newFolderNew layui-btn clickBtn hideBtn" >标签设置</button>
                        <button id="setShare" class="newFolderNew layui-btn clickBtn hideBtn" >分享设置</button>
                        <button id="cutFile" class="newFolderNew layui-btn  clickBtn hideBtn" >移动</button>
                        <button id="addFsCommonFolder" class="newFolderNew layui-btn  clickBtn hideBtn" style="width: 110px;">加入常用目录</button>
                        <button id="mulDownLoad" class="newFolderNew layui-btn  clickBtn hideBtn" >下载</button>
                        <button id="manyMulDownLoad" class="newFolderNew layui-btn hideBtn clickBtn" >打包下载</button>
                        <button id="delCategoryBtn" class="newFolderNew layui-btn  clickBtn hideBtn" >删除</button>
                        <button id="exempt" class="newFolderNew layui-btn  clickBtn hideBtn" >免除积分</button>
                        @if(shiro.hasPermission("doc:joinTopic")){
                        <button id="joinTopicFolder" class="newFolderNew layui-btn  clickBtn hideBtn" >加入专题</button>
                        @}
                        <button id="onlineEdit" class="newFolderNew layui-btn  clickBtn hideBtn" > 编辑文档</button>
                        @if(shiro.hasPermission("doc:joinTopic") || shiro.hasPermission("doc:setTop")){
                        <ul class="layui-nav" style="padding: 0 5px;background:none !important;display: inline-block">
                            <li class="layui-nav-item">
                                <button  id="more" style="width: 70px;text-align: left;" class="newFolderNew layui-btn  clickBtn">更多</button><i class="layui-icon layui-icon-down iconfont iconMore clickBtn" style="color: #222"></i>
                                <dl class="layui-nav-child">
                                    @if(shiro.hasPermission("doc:joinTopic")){
                                    <dd><button id="joinTopic"  class="doropdown layui-btn  clickBtn">加入专题</button></dd>
                                    @}
                                    @if(shiro.hasPermission("doc:setTop")){
                                    <dd><button id="setTop"  class="doropdown layui-btn  clickBtn">置顶</button></dd>
                                    @}
                                </dl>
                            </li>
                        </ul>
                        @}

                    </div>
                    <!--                    <div class="message">文档管理<span id="amount" class="amountArea"></span><span class="total"><span id="path" style="margin-left: 0px"></span></span></div>-->
                    <!--<div class="new-upload"><span  onclick=" window.parent.open('/frontUpload/list','mainFrame') "> 最近上传</span> </div>-->
                    <div class="search-wrapper">
                        <input class="search-input" id="searchName" value="" placeholder="按名称查找文件和目录">
                        <div class="search-btn" id="searchBtn">&nbsp;</div>
                        <!--<div class="search-btn" id="searchBtn">&nbsp;</div>-->
                    </div>
                    <div class="toolBar"  style="min-height: 50px">

                        <!--<button id="delHistoryBtn" class="layui-btn hideBtn clickBtn" ><i class="layui-icon">&#xea0f;</i>取消收藏</button>-->
                    </div>

                </div>
                <div class="fast-button">
                    <div class="fileButtonGroup index-crumbs">
                        <div class="message"><div style="display: inline-block;float: left">文档空间</div><span id="amount" class="amountArea"></span><img class="left" src="${ctxPath}/static/resources/img/front/moveleft.png" alt="" /><span class="total" style="margin-left: 0"><span id="path" style="margin-left: 0px"></span></span><img class="right" src="${ctxPath}/static/resources/img/front/moveleft.png" alt="" /></div>

                        <!--                        <button type="button" class="uploadBtn layui-btn hideBtn" style="background:rgba(90,163,255,1);">上传</button>-->
                        <!--                        <button id="newFolder" class="newFolder layui-btn hideBtn">创建目录</button>-->
                        <!--                        <button id="reName" class="newFolderNew layui-btn clickBtn hideBtn " >权限设置</button>-->
                        <!--                        <button id="setTip" class="newFolderNew layui-btn clickBtn hideBtn" >标签设置</button>-->
                        <!--                        <button id="setShare" class="newFolderNew layui-btn clickBtn hideBtn" >分享设置</button>-->
                        <!--                        <button id="cutFile" class="newFolderNew layui-btn  clickBtn hideBtn" >移动</button>-->
                        <!--                        <button id="mulDownLoad" class="newFolderNew layui-btn  clickBtn hideBtn" >下载</button>-->
                        <!--                        <button id="manyMulDownLoad" class="newFolderNew layui-btn hideBtn clickBtn" >打包下载</button>-->

                        <!--                        <button id="delCategoryBtn" class="newFolderNew layui-btn  clickBtn hideBtn" >删除</button>-->

                        <!--                        <button id="joinTopic" style="margin-left: 10px!important;" class="newFolder layui-btn hideBtn clickBtn">加入专题</button>-->
                        <!--                        <button id="setTop" style="width: 60px" class="newFolder layui-btn hideBtn clickBtn">置顶</button>-->

                        <div class="rit-menu clearfix">

                            <div id="listStyle1" title="平铺模式" class="rit-menu1 rit-menus  fr"></div>
                            <div id="listStyle2" title="列表模式" class="rit-menu2 rit-menus fr active"></div>
                            <div id="refreshList" title="刷新" ><i class="layui-icon layui-icon-refresh" style="color: #666;font-weight: 600;font-size: 17px;"></i> </div>
                        </div>
                    </div>
                    <div id="uploader" class="wu-example clearfix" style="height: auto">
                        <div class="shadow">
                            <div class="cloud">
                                <div class="upload-img iconfont">&#xe04a;</div>
                            </div>
                            <button class="layui-btn">上传至当前文件夹</button>
                        </div>
                        <div id="dndArea" >
                            <div class="file-container-flatten" id="">
                                <div id="view" ></div>
                            </div>
                        </div>
                        <div id="picker" class="webuploader-container" style="display:none">
                            <div class="webuploader-pick layui-btn"><i class="layui-icon">&#xea0c;</i>上传</div>
                            <div id="rt_rt_1bchdejhrarjdvd11h41eoh1nt1">
                                <input id="file_bp" name="file"
                                       class="webuploader-element-invisible" type="file" /> <label ></label>
                            </div>
                        </div>
                        <div class="layui-card popWin success" style="display: none" >
                            <div class="layui-card-header">
                                <span style="font-size: 17px;margin-right: 10px;">上传最新版本</span>
                                <div class="fr">
                                    <!--<i class="iconfont controls-down">&#xe61a;</i>-->
                                    <!--<i class="iconfont controls-close">&#x1006;</i>-->
                                    <a class="layui-layer-ico layui-layer-close layui-layer-close2 controls-close" href="javascript:;"></a>
                                </div>
                                <span style="color: rgba(1, 1, 1, 0.44);">默认继承旧版本所有权限及下载预览量数据</span>
                            </div>
                            <div class="layui-card-body">
                                <!--<div class="success-msg"></div>-->
                                <div class="btns">
                                    <div class="uploader-list upload-head">
                                        <div  class="item">
                                            <h4 class="info">文件名</h4>
                                            <h4 class="state">文件状态</h4>
                                        </div>
                                    </div>
                                    <!-- 文件列表：选择文件后在该div显示 -->
                                    <div id="thelist" class="uploader-list uploader-body list-group-item clearfix ng-hide"></div>
                                    <label class="text-right"></label>
                                </div>
                            </div>
                            <button id="finish-btn" class="finish-btn layui-btn  " style="margin-right:20px;float: right; background-color: #3C91FD;color: white;width: 70px" onclick="returnList()">完成</button>
                        </div>

                    </div>
                </div>

                <div id="laypageAre"></div>
            </div>
        </div>
    </div>
</div>
<div class="noDataTip">未找到相关内容~</div>
<input type="hidden" value="${returnDocId}" id="returnDocId">
<div id="addDiv" style="text-align:right" class="addFont ">

    <div class="popup layui-popup">
        <form class="layui-form">
            <div class="layui-form-item">
                <label class="layui-form-label">
                    <span class="we-red">*</span>目录名称
                </label>
                <div class="layui-input-block" style="margin-left:80px">
                    <input type="text" id="categoryName" autocomplete="off"  maxlength="130" lay-verify="required|categoryName" class="layui-input">
                    <button id="setAuthorityFolder" type="button" class="layui-btn front-layui-btn">配置当前目录权限</button>
                </div>
            </div>
            <div class="layui-form-item" id="checkBox">
                <label class="layui-form-label">是否审核</label>
                <div class="layui-input-inline" style="margin-left: -100px;margin-top: 4px;">
                    <input type="radio" name="check"  lay-filter="check" value="0" checked="checked">否
                    <input type="radio" name="check"  lay-filter="check" value="1">是
                </div>
            </div>
            <div class="layui-form-item" id="auditorBox">
                <label class="layui-form-label">审核人</label>
                <div class="layui-input-block auditor" style="margin-left:80px">
                    <input type="text" id="auditorName" autocomplete="off" class="layui-input" readonly>
                </div>
            </div>
            <div class="name-list clearfix"></div>
            <input type="hidden" value="${openFileId}" id="openFileId">
            <input type="hidden" value="${folderName}" id="folderName">
            <!--<div class="layui-form-item more-div">
                <label class="layui-form-label">
                 前台权限
                </label>
                <div class="layui-input-block radio-div" style="display: none;">
                    <input type="radio" name="visible" lay-filter="visible"  value="0" title="完全公开" >
                    <input type="radio" name="visible" lay-filter="visible"  value="1" title="部分可见" checked="">
                </div>
                <button id="setAuthority" type="button" class="layui-btn">可见范围</button>

            </div>
            <div class="name-list clearfix"></div>
            <div class="layui-form-item more-div">
                <label class="layui-form-label">
                    后台权限
                </label>

                <button id="setAuthority1" type="button" class="layui-btn">可见范围</button>
                <div class="layui-input-block">
                    <input type="checkbox" name="isEdit" id="isEdit" lay-skin="primary" title="可编辑文件" >
                    <input type="checkbox" name="isChild" id="isChild" lay-skin="primary" title="可编辑子目录"  >
                </div>
            </div>
            <div class="name-list-power clearfix"></div>-->
        </form>
    </div>

</div>
<div id="updateDiv" style="display: none;text-align:right" class="addFont ">
    <div class="popup layui-popup">
        <form class="layui-form">
            <div class="layui-form-item" id="checkBox1">
                <label class="layui-form-label">是否审核</label>
                <div class="layui-input-inline" style="margin-left: -20px;margin-top:4px">
                    <input type="radio" name="check1"  lay-filter="check1" value="0" checked="checked">否
                    <input type="radio" name="check1"  lay-filter="check1" value="1">是
                </div>
            </div>
            <div class="layui-form-item" id="auditorBox1">
                <label class="layui-form-label">审核人</label>
                <div class="layui-input-block auditor" style="margin-left:80px">
                    <input type="text" id="auditorName1" autocomplete="off" class="layui-input" readonly>
                </div>
            </div>
        </form>
    </div>
</div>
<div id="fileTree" class="jsTree" style="display: none"></div>
<div id="filTree" style="display: none;overflow: auto" class="leftArea">
    <div id="fileTree2" class="jsTree"></div>
</div>
<!-- 目录树 -->
<div id="folderCopyTreeAuthority" style="display: none;overflow: auto" class="leftArea">
    <div class="copy-div">
        <input id="isCopyAuth" type="checkbox" class="copy-input" value="" title="同时复制目录权限">
        <span class="copy-span" >同时复制目录权限</span>
    </div>
    <div id="folderCopyTreeAuthority2" class="jsTree"  ></div>
</div>
<div id="folderTreeAuthority" style="display: none;overflow: auto" class="leftArea">
    <div id="folderTreeAuthority2" class="jsTree"  ></div>
</div>
<!--重命名-->
<div id="reNameDiv" style="display: none;">
    <input id="reNameInput"  class="layui-input" autocomplete="off" style="    width: 80%;margin-right: auto;margin-left: auto; margin-top: 20px;">
</div>
<div class="integral"  ><span class="num" id="num"></span><span class="point">积分</span></div>
<script id="demo" type="text/html">
    <div class="member-card-list">
    <ul class="clearfix">
        {{#  layui.each(d.list, function(index, item){ }}

        {{#
        var titlesub = function(){
        var result='';
        if(item.fileType!="folder"){
        result=item.fileName+item.fileType;
        }else{
        if(adminFlag=="1"&&item.isEdit=="1"){
        result=item.fileName+"("+item.createUserName+")"
        }else{
        result=item.fileName
        }
        }
        return result;
        };

        }}
        <li class="file" ondblclick="dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')" title="{{titlesub()}}" onclick="clickOneTime(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.authorId}}')"  >
            <div class="left visible-range">
                {{#  if((item.visibleRange==0)){ }}

                {{#  }else{ }}

                {{#  } }}
            </div>
            <div class="right">


            </div>
            <div  class="file-selection" >
                <section class="icon" style="position: relative">
                    {{#  if(item.fileType == 'folder'){ }}
                    <div style="position: absolute;right: 83px;top: 10px;">
                        {{#  }else{ }}
                        <div style="position: absolute;right: 77px;top: 5px;">
                            {{#  } }}
                            {{#  if(item.fileType != 'folder'){ }}
                            {{#  if(noChildPower == 2 || adminFlag==1 || item.authority == 1||  item.authority == 2 ){     }}
                            <span  class="clickEventP">
                               <i class="layui-icon">&#xe61a;</i>
                           </span>
                            <input class="index" hidden value="{{index}}">
                            <div  class="moreicon" style="height:auto;">
                                <p onclick="iconDownLoad(null,'{{item.fileId}}','{{item.fileName}}')"> 下载</p>
                                {{#  if(noChildPower == 2 || adminFlag==1 ||  item.authority == 2 ){     }}
                                {{#  if(d.isOwn != '1'){     }}
                                <p onclick="iconSetAuthority(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置权限</p>
                                <p onclick="iconSetTip(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置标签</p>
                                {{#  } }}
                                <p onclick="shareSetting(null,'{{item.fileId}}')"> 设置分享</p>
                                <p onclick="iconMove(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 移动</p>
                                <p onclick="iconDelete(null,'{{item.fileId}}','{{item.fileName}}')"> 删除</p>
                                <p onclick="iconUpdateName(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}','{{index}}')"> 重命名</p>
                                <p onclick="iconUploadVersion(null,'{{item.fileId}}')" class="upload-new-version"> 上传最新版本</p>
                                <p onclick="iconViewVersion(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 查看历史版本</p>
                                <!--<p onclick="iconEditDoc(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 编辑文档</p>-->
                                {{# if($("#onlineEditUsing").val() == "true"){ }}
                                <p onclick="iconEditDocYozo(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 编辑文档</p>
                                {{# } }}
                                {{#  } }}
                            </div>
                            {{#  } }}
                            {{#  }else{ }}
                            {{#  if(noChildPowerFolder != 0 || adminFlag==1 ){     }}
                            <span  class="clickEventP">
                         <i class="layui-icon">&#xe61a;</i>
                     </span>
                            <input class="index" hidden value="{{index}}">
                            <div  class="moreicon" style="height:auto;">
                                {{#  if(d.isOwn != '1'){     }}
                                <p onclick="iconSetAuthorityFolder(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置权限</p>
                                {{#  } }}
                                {{# if($("#auditUsing").val() == "true"){ }}
                                <p oauditorBox1nclick="iconUpdateFolderAudit(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}', '{{item.auditFlag}}')"> 修改审核</p>
                                {{#  } }}
                                <p onclick="iconUpdateName(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}','{{index}}')"> 重命名</p>
                                <p onclick="iconMoveFolder(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 移动</p>
                                <p onclick="iconDeleteFolder(null,'{{item.fileId}}','{{item.fileName}}')"> 删除</p>
                            </div>
                            {{#  } }}
                            {{#  } }}
                        </div>
                        {{#  if(item.fileType === 'folder' && item.isEdit != '1'){ }}
                        <img class="folder-img" src="${ctxPath}/static/resources/img/fsfile/folder_member1.png">
                        {{#   }else if(item.fileType === 'folder' && item.isEdit === '1'){ }}
                        <img class="folder-img" src="${ctxPath}/static/resources/img/fsfile/folder_member2.png">
                        {{#  }else if(item.fileType === '.doc'||item.fileType === '.docx'){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/word.png">
                        {{#  }else if(item.fileType === '.txt'){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/txt.png">
                        {{#  }else if(item.fileType === '.ppt'||item.fileType === '.pptx' ||item.fileType === '.ppsx'){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ppt.png">
                        {{#  }else if(item.fileType === '.pdf'){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pdf.png">
                        {{#  }else if(item.fileType === '.ceb'){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ceb.png">
                        {{#  }else if(['.CD','.OGG','.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi','.m4a'].indexOf(item.fileType)!=-1){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/music.png">
                        {{#  }else if(['.mp4','.avi', '.wma', '.rmvb','.rm', '.flash', '.mkv', '.vob', '.swf', '.wmv'].indexOf(item.fileType)!=-1){ }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/video.png">
                        {{#  }else if(item.fileType === '.xls'||item.fileType === '.xlsx' ||item.fileType === '.csv' ||item.fileType === '.et') {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/excel.png">
                        {{#  }else if(['.png','.jpeg','.gif','.jpg'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pic.png">
                        {{#  }else if(['.zip','.rar'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/rar.png">
                        {{#  }else if(['.exe'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/exe.png">
                        {{#  }else if(['.psd'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/psd.png">
                        {{#  }else if(['.html'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/html.png">
                        {{#  }else if(['.bmp'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/bmp.png">
                        {{#  }else {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-iconNew/other.png">
                        {{#  } }}
                </section>
                <section class="profile">
                    {{#
                    var sub = function(){
                    var result='';
                    if(item.fileType!="folder"){
                    result=item.fileName+item.fileType;
                    }else{
                    if(adminFlag=="1"&&item.isEdit=="1"){
                    result=item.fileName+"("+item.createUserName+")"
                    }else{
                    result=item.fileName
                    }
                    }
                    if(result.length>16){
                    result=result.substring(0,15)+'...';
                    }
                    return result;
                    };

                    }}
                    <h1 id="name{{index}}" class="nameTitpe" >{{ sub() }}</h1>
                    <input type="text" id="inputName{{index}}"  maxlength="130"  value="{{item.fileName}}" class="layui-input hide ishover" onfocus="this.select()">
                </section>
            </div>
            {{#  if(item.fileType != 'folder'){     }}
            <div class="condition">
                <img src="${ctxPath}/static/resources/img/fsfile/downPic.png"/><span id="downNum{{ item.fileId }}" class="vertical"></span>&nbsp;&nbsp;
                <img src="${ctxPath}/static/resources/img/fsfile/lookPic.png"/><span id="readNum{{ item.fileId }}" class="vertical"></span>&nbsp;&nbsp;
                <span id="person{{ item.fileId }}" class="vertical"></span>
                <span id="authority{{ item.fileId }}" class="vertical" style="display: none"></span>
            </div>
            {{#  } }}
        </li>
        {{#  }); }}
    </ul>
    </div>
</script>
<script id="demo1" type="text/html">
    <div class="fixed-table-header view-table">
        <table class="layui-table table_list">
            <colgroup>
                <col width="56%">
                <col  width="180">
                <col width="120">
                <col>

            </colgroup>
            <thead>
            <tr style="    color: #222;">
                <th lay-data="{field:'filename'}" style="text-align: left;cursor: pointer" >
                    <input  type="checkbox" class="checkAll" style="position: absolute;opacity: 0">
                    <div class="layui-unselect layui-form-checkbox" onclick="checkAll(this)"  style="float: left;font-size: 12px;line-height: 12px;width: 12px;height: 14px;padding-right:12px;margin-top:8px">
                        <i class="iconfont" style="width: 12px;height:12px;font-size: 12px;" >&#xe605;</i>
                    </div>
                    <div onclick="orderByName()" style="text-indent: 10px">名称
                        <i class="layui-icon"  id="orderName" style="cursor: pointer ;font-size: 13px;display: none">
                            <img style="width:10px;height: auto"  src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png">
                        </i>
                        <i class="layui-icon"  id="orderName1"  style="display: none;cursor: pointer ;font-size: 13px">
                            <img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png">
                        </i>
                    </div></th>
                <th onclick="orderByTime()" lay-data="{field:'time'}" style="text-align: left;cursor: pointer">上传时间
                    <i class="layui-icon" id="orderTime"style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto"  src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png">
                    </i>
                    <i class="layui-icon" id="orderTime1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png">
                    </i>
                </th>
                <th lay-data="{field:'user'}" style="text-align: left;cursor: pointer " onclick="orderByUser()">上传人
                    <i class="layui-icon" id="orderUser"style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto"  src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png">
                    </i>
                    <i class="layui-icon" id="orderUser1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png">
                    </i></th>
                <th lay-data="{field:'size'}" style="text-align: left;cursor: pointer " onclick="orderBySize()">大小
                    <i class="layui-icon" id="orderSize"style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto"  src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png">
                    </i>
                    <i class="layui-icon" id="orderSize1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png">
                    </i></th>

            </tr>
            </thead>
        </table>
    </div>
    <div class="member_center_list">
    <table id="tableData" class="layui-table table_list" >
        <colgroup>
            <col width="56%">
            <col  width="180">
            <col width="120">
            <col>

        </colgroup>
<!--        <thead>-->
<!--        <tr style="    color: #8796AB;">-->
<!--            <th lay-data="{field:'filename'}" style="text-align: center">-->
<!--                <input  type="checkbox" class="checkAll" style="position: absolute;opacity: 0">-->
<!--                <div class="layui-unselect layui-form-checkbox" onclick="checkAll(this)"  style="float: left;font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px">-->
<!--                    <i class="iconfont" style="width: 12px;height: 12px;font-size: 12px;">&#xe605;</i>-->
<!--                </div>-->
<!--                文件名-->
<!--            </th>-->
<!--            <th lay-data="{field:'time'}" style="text-align: center">上传时间-->
<!--                <i class="layui-icon" onclick="getTimeOrder()" style="cursor: pointer ;font-size: 13px;display: none">-->
<!--                    <img   style="width:10px;height: auto" class="btnIcon" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1.png">-->
<!--                </i>-->
<!--                <i class="layui-icon" onclick="getTimeOrder1()"  style="cursor: pointer ;font-size: 13px;display: none">-->
<!--                    <img class="btnIcon"  style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2.png">-->
<!--                </i>-->
<!--            </th>-->
<!--            <th lay-data="{field:'user'}" style="text-align: center">上传人</th>-->
<!--            <th lay-data="{field:'size'}" style="text-align: center">大小</th>-->

<!--        </tr>-->
<!--        </thead>-->
        <tbody>
        {{#  layui.each(d.list, function(index, item){ }}

        {{#
        var titlesub = function(){
        var result='';
        if(item.fileType!="folder"){
        result=item.fileName+item.fileType;
        }else{
        if(adminFlag=="1"&&item.isEdit=="1"){
        result=item.fileName+"("+item.createUserName+")"
        }else{
        result=item.fileName
        }
        }
        return result;
        };

        }}

        {{#
        var timesub = function(){
        var result=item.createTime;

        result=  result.substring(0,result.lastIndexOf(':'));

        return result;
        };

        }}
        <tr class="hoverEvent"  ondblclick="dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')" onclick="clickCheck(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')">
            <td style="position: relative" >
                <input type="checkbox" class="checkbox"  name="checkboxname"  onclick="tryPop(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')" style="position: absolute;opacity: 0" >
                <div class="layui-unselect layui-form-checkbox"  style="font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px" onclick="clickIconCheck(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')">
                    <i class="iconfont" style="width: 12px;height: 12px;font-size: 12px;" >&#xe605;</i>
                </div>
                <input  class="checkFileId" hidden value="{{item.fileId}}" name="checkFileId">
                <input  class="checkFileType" hidden value="{{item.fileType}}" name="checkFileType">
                <input  class="checkFileName" hidden value="{{item.fileName}}" name="checkFileName">
                <input  class="chooseFileAuthor" hidden value="{{item.createUserId}}">
                <input id="{{item.fileId}}" value="{{index}}"hidden>
                {{#  if(item.fileType === 'folder' && item.isEdit != '1'){ }}
                <img class="folder-img" src="${ctxPath}/static/resources/img/fsfile/folder_member1.png">
                {{#   }else if(item.fileType === 'folder' && item.isEdit === '1'){ }}
                <img class="folder-img" src="${ctxPath}/static/resources/img/fsfile/folder_member2.png">
                {{#  }else if(item.fileType === '.doc'||item.fileType === '.docx'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/word.png">
                {{#  }else if(item.fileType === '.txt'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/txt.png">
                {{#  }else if(item.fileType === '.ppt'||item.fileType === '.pptx' ||item.fileType === '.ppsx'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ppt.png">
                {{#  }else if(item.fileType === '.pdf'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pdf.png">
                {{#  }else if(item.fileType === '.ceb'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ceb.png">
                {{#  }else if(['.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi','.m4a'].indexOf(item.fileType)!=-1){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/music.png">
                {{#  }else if(['.mp4','.avi', '.wma', '.rmvb','.rm', '.flash','.mkv', '.vob', '.swf', '.wmv'].indexOf(item.fileType)!=-1){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/video.png">
                {{#  }else if(item.fileType === '.xls'||item.fileType === '.xlsx' ||item.fileType === '.csv' ||item.fileType === '.et') {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/excel.png">
                {{#  }else if(['.png','.jpeg','.gif','.jpg'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pic.png">
                {{#  }else if(['.bmp'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/bmp.png">
                {{#  }else if(['.psd'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/psd.png">
                {{#  }else if(['.html'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/html.png">
                {{#  }else if(['.exe'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/exe.png">
                {{#  }else if(['.zip','.rar'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/rar.png">
                {{#  }else {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-iconNew/other.png">
                {{#  } }}
                {{#
                var sub = function(){
                var result='';
                if(item.fileType!="folder"){
                result=item.fileName+item.fileType;
                }else{
                if(adminFlag=="1"&&item.isEdit=="1"){
                result=item.fileName+"("+item.createUserName+")"
                }else{
                result=item.fileName
                }
                }




                return result;
                };

                }}
                {{#  if(item.fileType != 'folder'){     }}
                <span id="name{{index}}"  class ="nameTitpe nofolder" title="{{titlesub()}}" style="cursor: default" ><a class="fileName" onclick="cancelBubble();dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')">{{ sub() }}</a></span>
                {{#  } else { }}
                <span   id="name{{index}}"  class ="nameTitpe fileName isFolder" title="{{titlesub()}}" ><a class="folderName" onclick="cancelBubble();dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')">{{ sub() }}</a></span>
                {{#  }  }}
                {{#  if(item.fileType != 'folder'){     }}
                <span style="display: none" id="hoverSpan" class="hoverSpan">
                <span style="display: inline-block;float: right">
                       {{#  if(noChildPower == 2 || adminFlag==1  || item.authority == 1||  item.authority == 2 ){     }}
                    <i class="layui-icon wenku-font wenku-font-download" title="下载" onclick="iconDownLoad(this,'{{item.fileId}}','{{item.fileName}}')" style="font-size: 14px;cursor: pointer;z-index: 999;position: relative"></i>
                    {{#  } }}

                        {{#  if(item.shareFlag == '1'){     }}
                        <i class="layui-icon" title="分享" onclick="share(this,'{{ item.fileId }}','{{item.fileType}}','{{item.fileName}}')" style="font-size: 14px ;cursor: pointer">&#xe641;</i>
                        {{#  } }}
                      {{#  if(noChildPower == 2 || adminFlag==1  ||  item.authority == 2 ){     }}
                    <i class="layui-icon clickEvent" title="更多" style="font-size: 16px;cursor: pointer" >&#xe65f;</i>
                    <input class="index" hidden value="{{index}}">
                    <div class="moreicon">
     {{#  if(d.isOwn != '1'){     }}
                            <p onclick="iconSetAuthority(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置权限</p>
                            <p onclick="iconSetTip(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置标签</p>
                            {{#  } }}
                        <p onclick="shareSetting(this,'{{item.fileId}}')"> 设置分享</p>
                        <p onclick="iconMove(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 移动</p>
                        <p onclick="iconDelete(this,'{{item.fileId}}','{{item.fileName}}')"> 删除</p>
                        <p onclick="iconUpdateName(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}','{{index}}')"> 重命名</p>
                        <p onclick="iconUploadVersion(this,'{{item.fileId}}')" class="upload-new-version"> 上传最新版本</p>
                        <p onclick="iconViewVersion(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 查看历史版本</p>
                        <!--<p onclick="iconEditDoc(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 编辑文档</p>-->
                        {{# if($("#onlineEditUsing").val() == "true"){ }}
                        <p onclick="iconEditDocYozo(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 编辑文档</p>
                        {{# } }}
                    </div>
      {{#  } }}
                    </span>
                </span>

                {{# }else { }}
                <span style="display: none" id="hoverSpan" class="hoverSpan">
                <span style="display: inline-block;float: right" >

                     {{#  if(noChildPowerFolder != 0 || adminFlag==1 ){     }}
                    <i class="layui-icon" title="分享" onclick="share(this,'{{ item.fileId }}','{{item.fileType}}','{{item.fileName}}')" style="font-size: 14px ;cursor: pointer">&#xe641;</i>

                    <i class="layui-icon wenku-font wenku-font-revise" title="重命名" onclick="iconUpdateName(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}','{{index}}')" style="font-size: 14px ;cursor: pointer"></i>
                {{#  } }}
                      {{#  if(noChildPowerFolder != 0 || adminFlag==1 ){     }}
                    <i class="layui-icon clickEvent" title="更多" style="font-size: 14px;cursor: pointer" >&#xe65f;</i>
                    <input class="index" hidden value="{{index}}">
                    <div  class="moreicon"style="height: auto" >
                           {{#  if(d.isOwn != '1'){     }}
                        <p onclick="iconSetAuthorityFolder(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置权限</p>
                         {{#  } }}
                         {{# if($("#auditUsing").val() == "true"){ }}
                                <p onclick="iconUpdateFolderAudit(null,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}', '{{item.auditFlag}}')"> 修改审核</p>
                         {{#  } }}
                          <p onclick="iconMoveFolder(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{item.createUserId}}')"> 移动</p>
                        <p  onclick="iconDeleteFolder(this,'{{item.fileId}}','{{item.fileName}}')"> 删除</p>
                    </div>
      {{#  } }}
                    </span>
                </span>

                {{#  } }}
                <input type="text" id="inputName{{index}}" maxlength="130"  value="{{item.fileName}}" class="layui-input hide ishover" onfocus="this.select()">

            </td>
            <td> {{ timesub() }}</td>
            <td>
                {{# if(item.createUserName!=undefined&&item.createUserName!=''){   }}
                {{item.createUserName}}
                {{#  }else {  }}
                {{item.createUserId}}
                {{#  } }}
            </td>

            <td>    {{#  if(item.fileType != 'folder'){     }}
                {{item.fileSize}}
                {{#  } }}</td>

            <span id="person{{ item.fileId }}" style="display: none;" class="vertical userName"></span>
            <span id="authority{{ item.fileId }}" style="display: none;" class="vertical"></span>
        </tr>
        {{#  }); }}
        </tbody>
    </table>
    </div>
</script>
<script src="${ctxPath}/static/assets/lib/webuploader0.1.5/webuploader.nolog.version.js?v=${h_version}"></script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/personalcenter/js/loading.js?v=${h_version}"></script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/personalcenter/js/upload-list.js?v=${h_version}"></script>
<script src="${ctxPath}/static/assets/lib/jsTree/jstree.js?v=${h_version}"></script>

<script>
    var width = $(window).width();
</script>
<script language="javascript">
    setInterval(function () {
        var h=$("#uploadList").height()+50;

        $(window.parent.document).find("iframe[id='myIframe']").height(h);
    },300)

</script>

</body>
</html>
