<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jxdinfo.doc.front.personalmanager.dao.DocVersionMapper">
    <select id="selectIds" resultType="java.lang.String">
        select doc_id from doc_version where version_reference = #{versionReference} and valid_flag = '1'
    </select>
    <update id="updateValidFlag">
        UPDATE doc_version SET valid_flag = '0' WHERE doc_id IN 
        <foreach collection="docIds" item="docId" open="(" close=")" separator=",">
            #{docId}
        </foreach>
    </update>
    <select id="selectVersionNumber" resultType="int" >
        select IFNULL(MAX(version_number),1) FROM doc_version  WHERE version_reference = #{VersionReference}
    </select>
</mapper>