<head>
    @include("/common/front-style.html"){}
    @include("/common/plugins.html"){}
    @include("/common/plugins_ext.html"){}
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/integral.css?v=${h_version}"/>
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/personalcenter-common.css?v=${h_version}"/>

    <link rel="stylesheet" href="${ctxPath}/static/assets/lib/webuploader0.1.5/webuploader.css?v=${h_version}">
    <link href="${ctxPath}/static/resources/css/front/common_doc.css?v=${h_version}" type="text/css" rel="stylesheet">
    <style>
        .layui-layer .layui-layer-title{
            text-align: center;
            background: white!important;
            margin: 0px 42px;
        }
    </style>
</head>
<body>
<div class="background" id="integralList">
    <div class="title">
        <div class="layui-col-md9 layui-col-sm9 con-full-r rightArea">
            <div id="marg2" style="overflow: auto">
                <div class="table-top clearfix"style="position: relative">
                    <div class="message"  style="width: 100%">我的积分 <span>您已超过<span id="present" style=" width:29px;color: #FFAD5B;margin-left:3px;margin-right:3px"></span>的小伙伴</span>
                        <span id="play" style="cursor: pointer;color:rgba(255,173,91,1);">如何玩转积分
                               <s><i></i></s>
                        </span><span class="interal-icon">
                        <img src="${ctxPath}/static/resources/img/fsfile/authority/interal.png">
                    </span>


                    </div>

                    <div class="present">
                        <!--<input class="search-input" id="searchName" placeholder="按名称查找文件" value="">-->
                        <!--<div class="search-btn" id="searchBtn">&nbsp;</div>-->
                        <!--<button class="btn btn-more">获得更多积分</button>-->
                    </div>
                    <div class="integral_div">
                        <div id="viewIntegral"></div>
                    </div>
                </div>
                <!--  <div  class="integral-rule" style="display: none" >
                      <div class="integral-title"><span > 积分规则</span></div>
                      <div  class="integral-content">
                          <div class="integral-desc"> 积分是金企文库的虚拟货币，获得和消费积分规则如下：</div>

                          <div class="integral-info-title">
                              获得积分：
                          </div>
                          <div class="integral-info-info"></div>
                      </div>
                  </div>-->
            </div>
        </div>
    </div>
    <div class="content clearfix" >
        <div class="layui-col-md9 layui-col-sm9 con-full-r rightArea">
            <div id="marg" style="overflow: auto">
                <div class="table-top2 clearfix">
                    <div class="message2">积分明细
                        <!--<span id="amount"></span>-->
                    </div>
                    <div class="toolBar"  style="min-height: 50px">

                        <!--<button id="delHistoryBtn" class="layui-btn hideBtn clickBtn" ><i class="layui-icon">&#xea0f;</i>取消收藏</button>-->
                    </div>
                </div>
                <div class="fast-button">      <div id="uploader" class="wu-example">
                    <div class="shadow">

                    </div>
                    <div id="dndArea">
                        <div class="file-container-flatten" id="">
                            <div id="view"></div>
                        </div>
                    </div>
                    <div class="layui-card popWin success" style="display: none" >
                        <div class="layui-card-header">
                            <span>积分记录</span>
                            <div class="fr">
                                <i class="iconfont controls-down">&#xe61a;</i>
                                <i class="iconfont controls-close">&#x1006;</i>
                            </div>
                            <span id="setFileAuthority" class="setFileAuthority"> 权限设置</span>
                        </div>
                        <div class="layui-card-body">
                            <div class="success-msg"></div>
                            <div class="btns">
                                <div class="uploader-list upload-head">
                                    <div  class="item">
                                        <h4 class="info">文件名</h4>
                                        <h4 class="state">文件状态</h4>
                                        <h4   class="operation" href="javascript:void(0);" class="file_btn_head " style="text-align: center">操作</h4>
                                    </div>
                                </div>
                                <!-- 文件列表：选择文件后在该div显示 -->
                                <div id="thelist" class="uploader-list uploader-body list-group-item clearfix ng-hide"></div>
                                <label class="text-right"></label>
                            </div>
                        </div>
                    </div>
                </div></div>

                <div id="laypageAre"></div>
            </div>
        </div>
    </div>
</div>

<script id="demo1" type="text/html">
    <div class="fixed-table-header view-table">
        <table class="layui-table table_list">
            <colgroup>
                <col width="25%">
                <col>
                <col width="25%">
                <col width="25%">
            </colgroup>
            <thead>
            <tr style="color: #8796AB;">
                <th lay-data="{field:'rule_name'}" style="text-align: center">
                    <!--<input  type="checkbox" class="checkAll" style="position: absolute;opacity: 0">-->
                    <!--<div class="layui-unselect layui-form-checkbox" onclick="checkAll(this)"  style="float: left;font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px">-->
                    <!--<i class="iconfont" style="width: 12px;font-size: 12px;" >&#xe605;</i>-->
                    <!--</div>-->
                    操作类型</th>
                <th lay-data="{field:'rule_des'}" style="text-align: center">操作说明</th>

                <th lay-data="{field:'integral'}" style="text-align: center">积分记录</th>
                <th lay-data="{field:'operate_time'}" style="text-align: center">操作时间</th>
            </tr>
            </thead>
        </table>
    </div>
    <table class="layui-table table_list" >
        <colgroup>
            <col width="25%">
            <col>
            <col width="25%">
            <col width="25%">
        </colgroup>
        <thead>
        <tr>
            <th lay-data="{field:'rule_name'}" style="text-align: center">
                <!--<input  onclick="checkAll()"  type="checkbox" class="checkAll"  style="float: left" >-->
                <div class="layui-unselect layui-form-checkbox" onclick="checkAll()"  style="float: left;font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px">
                    <i class="iconfont" style="width: 12px;font-size: 12px;" >&#xe605;</i>
                </div>
                操作类型</th>

            <th lay-data="{field:'rule_des'}" style="text-align: center">操作说明</th>

            <th lay-data="{field:'integral'}" style="text-align: center">积分记录</th>
            <th lay-data="{field:'operate_time'}" style="text-align: center">操作时间</th>
        </tr>
        </thead>
        <tbody>
        {{#  layui.each(d.list, function(index, item){ }}
        {{# if(null != item.rule_name){}}
        <tr title="{{item.rule_name}}" style="height: 45px!important;">
            <td style="text-align: center">
                <!--<input type="checkbox" class="checkbox"  name="checkboxname"  onclick="tryPop(this,'{{item.id}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')" style="position: absolute;opacity: 0" >-->
                <!--<div class="layui-unselect layui-form-checkbox"  style="font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px" onclick="clickIconCheck(this,'{{item.id}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')">-->
                <!--<i class="iconfont" style="width: 12px;font-size: 12px;" >&#xe605;</i>-->
                <!--</div>-->
                <!--<input  class="checkFileId" hidden value="{{item.id}}">-->
                <!--<input  class="checkFileType" hidden value="{{item.fileType}}">-->
                <!--<input  class="checkFileName" hidden value="{{item.fileName}}">-->
                <!--<input  class="chooseFileAuthor" hidden value="{{item.createUserId}}">-->
                <!--{{#  if(item.fileType === 'folder'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-folder26.png">-->
                <!--{{#  }else if(item.fileType === '.doc'||item.fileType === '.docx'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-word26.png">-->
                <!--{{#  }else if(item.fileType === '.txt'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-txt26.png">-->
                <!--{{#  }else if(item.fileType === '.ppt'||item.fileType === '.pptx'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-ppt26.png">-->
                <!--{{#  }else if(item.fileType === '.pdf'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-pdf26.png">-->
                <!--{{#  }else if(item.fileType === '.ceb'){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-ceb26.png">-->
                <!--{{#  }else if(['.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi'].indexOf(item.fileType)!=-1){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-audio26.png">-->
                <!--{{#  }else if(['.mp4','.avi', '.wma', '.rmvb','.rm', '.flash'].indexOf(item.fileType)!=-1){ }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-video26.png">-->
                <!--{{#  }else if(item.fileType === '.xls'||item.fileType === '.xlsx') {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-excel26.png">-->
                <!--{{#  }else if(['.png','.jpeg','.gif','.jpg'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-img26.png">-->
                <!--{{#  }else if(['.bmp'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-bmp26.png">-->
                <!--{{#  }else if(['.psd'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-psd26.png">-->
                <!--{{#  }else if(['.html'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-html26.png">-->
                <!--{{#  }else if(['.exe'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-exe26.png">-->
                <!--{{#  }else if(['.zip','.rar'].indexOf(item.fileType)!=-1) {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-zip26.png">-->
                <!--{{#  }else {  }}-->
                <!--<img  src="${ctxPath}/static/resources/img/front/file-icon/ic-html26.png">-->
                <!--{{#  } }}-->
                {{#
                var sub = function(){
                var result=item.rule_name;

                return result;
                };

                }}
                <span id="name{{index}}" class="" style="cursor: default" >{{ sub() }}</span>
                <input type="text" id="inputName{{index}}" style="width:78%;float:right"  maxlength="130"  value="{{item.fileName}}" class="layui-input hide">
            </td>
            <td style="text-align: center">
                {{item.rule_des}}
            </td>


            {{# if (parseInt(item.integral) > 0){ }}
            <td style="color: limegreen">{{ '+' + item.integral }}</td>
            {{# }else { }}
            <td style="color: red">{{ item.integral }}</td>
            {{# } }}

            <td>
                {{item.operate_time.substring(0,item.operate_time.lastIndexOf(':'))}}
            </td>

            <span id="person{{ item.fileId }}" style="display: none;" class="vertical"></span>
            <span id="authority{{ item.fileId }}" style="display: none;" class="vertical"></span>
        </tr>
        {{#  }}}
        {{#  }); }}
        </tbody>
    </table>

</script>
<script id="integral" type="text/html">
    <div class="view-table2">
        <table class="table_integral">
            <tr class="integral_tr">
                <td style="color:#3C91FD;">
                    <span class="font_total" onclick="refreshFile(1,20)">{{ d.total }}</span>
                    <span class="point_total">分</span>
                </td>
                <td>
                    <span class="font_detail" onclick="refreshFile(1,20,['upload'])">
                        {{# if (d.upload == null || d.upload == '') { }}
                             {{ 0 }}
                        {{# } else { }}
                            {{ '+' +d.upload }}
                        {{# } }}
                    </span>
                    <span class="point">分</span>
                    <br>上传文档
                    <div class="border"></div>
                </td>
                <td>
                    <span class="font_detail" onclick="refreshFile(1,20,['beDownloaded'])">
                        {{# if (d.beDownloaded == null || d.beDownloaded == '') { }}
                           {{ 0 }}
                        {{# } else { }}
                            {{ '+' +d.beDownloaded }}
                        {{# } }}
                    </span>
                    <span class="point">分</span>
                    <br>文档被下载
                    <div class="border"></div>
                </td>
                <td>
                    <span class="font_detail" onclick="refreshFile(1,20,['bePreviewed'])">
                        {{# if (d.bePreviewed == null || d.bePreviewed == '') { }}
                            {{ 0 }}
                        {{# } else { }}
                            {{ '+' +d.bePreviewed }}
                        {{# } }}
                    </span>
                    <span class="point">分</span>
                    <br>文档被预览
                    <div class="border"></div>
                </td>
                <td>
                    <span class="font_detail" onclick="refreshFile(1,20,['beShared'])">
                        {{# if (d.beShared == null || d.beShared == '') { }}
                            {{ 0 }}
                        {{# } else { }}
                            {{ '+' +d.beShared }}
                        {{# } }}
                    </span>
                    <span class="point">分</span>
                    <br>文档被分享
                    <div class="border"></div>
                </td>
                <td>
                    <span class="font_detail" onclick="refreshFile(1,20,['login','search','defaultBonus','preview','share'])">
                        {{# if (d.rewards == null || d.rewards == '') { }}
                            {{ 0 }}
                        {{# } else { }}
                            {{ '+' +d.rewards }}
                        {{# } }}
                    </span>
                    <span class="point">分</span>
                    <br>系统奖励
                    <div class="border"></div>
                </td>
                <td>
                    <span class="font_download" onclick="refreshFile(1,20,['download'])">
                        {{# if (d.download == null || d.download == '') { }}
                            {{ 0 }}
                        {{# } else { }}
                            {{ '-' + (0 - parseInt(d.download)) }}
                        {{# } }}
                    </span>
                    <span class="point_download">分</span>
                    <br>下载文档
                    <div class="noBorder"></div>
                </td>
            </tr>
        </table>
    </div>
</script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/personalcenter/js/integral.js?v=${h_version}"></script>
<script>
    var width = $(window).width();
</script>
<script language="javascript">

    setInterval(function () {
        var h=$("#integralList").height()+50;

        $(window.parent.document).find("iframe[id='myIframe']").height(h);
    },300)

</script>
</body>
