<!DOCTYPE html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telephone=no"/>
    <title>${session.projectTitle}-问答详情</title>
    @include("/common/front-style.html"){}
    @include("/common/front-script.html"){}

    <script type="text/javascript">
        hussar_path="${ctxPath}";
        theme = "${session.theme}";
    </script>

    <script type="text/javascript">
        hussar_path="${ctxPath}";
    </script>
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/questionDetail.css?v=${h_version}" />
</head>
<body>
<!--   加上头部 -->
@include("/common/front-header_new2.html"){}
<input value="${item.queId}" id="queId" hidden>
<input value="${ctxPath}" id="ctxPathStr" hidden>

<input value="${userId}" id="userId" hidden placeholder="当前登陆人，追问追答用。">
<input value="${item.queUserId}" id="queUserId" hidden placeholder="问题提问人，追问追答用。">

<input value="${item.title}" id="mainTitle" hidden placeholder="问题标题，转入知识库用">
<input value="${item.label}" id="mainLabel" hidden placeholder="问题标签，转入知识库用">

<div class="question-container">
    <div class="container">
        <div class="question-content">
            <div class="question">
                <span class="question-title">${item.title!}</span>
                <div class="question-info">
                    <div>
                        <span>提问者：<span>${item.queUserName!}</span></span>
                        <span>阅读数：<span>${item.readNum!}</span></span>
                        <span>提问时间：<span>${item.queTime!,dateFormat='yyyy-MM-dd HH:mm'}</span></span>
                    </div>
                </div>
                @for(ite in imgPathList){
                <div class="desc">
                    <span>${ite.text!}</span>
                    <!--<span class="open-desc">展开<i class="layui-icon">&#xe61a;</i></span>-->
                </div>
                <div class="desc-img">
                    @if(ite.imgPath != null){
                    @if(ite.type == 'video'){
                    <video id="video"   controls="true" controlslist="nodownload" >
                        <source id="v1" src="${ctxPath}/preview/list?fileId=${ite.imgPath}" type="video/mp4">
                        您的浏览器不支持 video 标签。
                    </video>
                    @} else {
                    <img src="${ctxPath}/preview/list?fileId=${ite.imgPath}" alt="" >
                    @}
                    @}
                    <!--<img src="${ctxPath}/static/resources/img/front/index/photo.png " alt="" />
                    <img src="${ctxPath}/static/resources/img/front/index/photo.png " alt="" />-->
                </div>
                @}
                <div class="other">

                    <div></div>

                    <div>
                        <div class="question-share" onclick="share()" hidden></div>
                        @if(isFollow == '1'){
                        <div class="question-collection-focus" title="已收藏" onclick="cancelFocus(this)"></div>
                        @} else{
                        <div class="question-collection" onclick="focusOnQue(this)"></div>
                        @}

                    </div>
                </div>
                <div id="uEditor" style="display: none;">
                    <textarea class="layui-textarea" id="LAY_demo1" style="display: none"></textarea>
                    <button id="submitAnswers">提交回答</button>
                </div>
            </div>
            <div class="part"><span>${count}个回答</span></div>

            <div class="answer" id="view1">

            </div>
            @if(count > 10){
            <div class="allOrOne">
                <span onclick="openAll(this)">更多回答</span>
            </div>
            @}

        </div>
    </div>
</div>
@include("/common/front-footer.html"){}

<!--  加载回答    -->
<script id="demo1" type="text/html">
    {{#  layui.each(d.list, function(index, item){ }}
    <div class="answer-item">
        <div class="answer-info">
            <div class="answer-people">
                <img src="${ctxPath}/static/resources/img/front/index/photo.png" alt="">
                <div>
                    <span>{{ item.userName }}</span>
                    <span>{{ layui.util.toDateString(item.ansTime, 'yyyy-MM-dd HH:mm') }}</span>
                </div>
                {{#  if(item.bestAnswer === '1' ){ }}
                <img src="${ctxPath}/static/resources/img/bestAnswer.png" title="最佳答案" style="position: absolute;width: 45px;height: 45px;border-radius: 100%;left: 106px;top:-3px" alt="最佳答案"/>
                {{#  } }}
            </div>
            <div class="answer-button-group">
                @if(aOrQ  == '2'){
                {{#  if(item.intoKnowledge === '1' ){ }}
                <button onclick="intoKnowledgeBase(this)" value="{{ item.ansId }}" class="knowleggeButton">转到知识库</button>
                {{#  } }}
                @}
            </div>
        </div>
        <div class="answer-desc max-height">{{ item.ansContent }}</div>
        {{#  if(item.ansContent != null && item.ansContent.length >200){ }}
        <div class="more-answer" onclick="onAllContent(this)">展开全部<i>&#xe690;</i></div>
        {{#  } }}

        {{#  if(item.continueQa.length > 0){ }}
        <div class="zhuiwen">
            <ul class="layui-timeline">
                {{#  layui.each(item.continueQa, function(ind, te){ }}
                <li class="layui-timeline-item">
                    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                    <div class="layui-timeline-content layui-text">
                        {{#  if(te.type === "1"){ }}
                        <span class="layui-timeline-title">追问</span>
                        {{#  }  }}
                        {{#  if(te.type === "2"){ }}
                        <span class="layui-timeline-title">追答</span>
                        {{#  }  }}
                        <p>{{ te.content }}</p>
                    </div>
                </li>
                {{#  }); }}
            </ul>
        </div>
        {{#  } }}

        <div class="other">
            <div class="answer-operate">
                {{#  if(item.isAgree === "1"){ }}
                <div class="likes" style="color: #FFCB3E"><i>&#xe64f;</i><span>{{ item.agreeNum }}</span></div>
                {{#  }  }}
                {{#  if(item.isAgree != "1"){ }}
                <div class="likes" value="{{ item.ansId }}"><i>&#xe64f;</i><span>{{ item.agreeNum }}</span></div>
                {{#  }  }}
                <div class="comment" onclick="myComments(this)" value="{{ item.ansId }}" ansId = "{{ item.ansId }}"><i>&#xe651;</i>评论（<span>{{ item.commentNum }}</span>）</div>
            </div>
        </div>
    </div>
    {{#  }); }}
</script>

<!--  加载回答的评论    -->
<script id="demo2" type="text/html">

    <div class="comment-list-area">
        {{#  layui.each(d.list, function(index, item){ }}
        <div class="comment-item">
            <div class="comment-item-img">
                <img src="${ctxPath}/static/resources/img/front/index/photo.png " />
            </div>
            <div class="comment-item-content">
                <div class="comment-item-info">
                    <span>{{ item.replyUserName }}</span>
                    <span>{{ item.replyTime }}</span>
                </div>
                <div class="comment-item-desc">{{ item.content }}</div>
                <div class="comment-item-opt">
                    <span class="likes" value="{{ item.id }}"><i>&#xe64f;</i><span>{{ item.agreeNum }}</span></span>
                    <span class="comment1" onclick="replyComment(this)" value="{{ item.id }}" ansId = "{{ item.ansId }}"><i>&#xe669;</i>回复（<span>{{ item.commentNum }}</span>）</span>
                </div>
            </div>
        </div>
        {{#  }); }}
    </div>
</script>
<!--  加载回答的评论的所有分级的回复    -->
<script id="demo3" type="text/html">

    <div class="comment-list-area">
        {{#  layui.each(d.list, function(index, item){ }}

        <div class="comment-item child">
            <div class="comment-item-img">
                <img src="${ctxPath}/static/resources/img/front/index/photo.png " />
            </div>
            <div class="comment-item-content">
                <div class="comment-item-info">
                    <span><span>{{ item.replyUserName }}</span><span>回复</span><span>{{ item.byUserName }}</span></span>
                    <span>{{ item.replyTime }}</span>
                </div>
                <div class="comment-item-desc">{{ item.content }}</div>
                <div class="comment-item-opt">
                    <span class="likes" value="{{ item.id }}"><i>&#xe64f;</i><span>{{ item.agreeNum }}</span></span>
                    <span class="comment1"  onclick="replyComment(this)" value="{{ item.id }}" ansId = "{{ item.ansId }}"><i>&#xe600;</i><span>回复(<span>{{ item.commentNum }}</span>)</span></span>
                </div>
            </div>
        </div>
        {{#  }); }}
    </div>
</script>

<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/questions/questionDetail_ordinary.js?v=${h_version}"></script>
</body>
</html>
