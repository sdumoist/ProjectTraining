<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>资源管理器</title>
    @include("/common/front-style.html"){}
    @include("/common/front-script.html"){}
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/docmanager/css/front-resource-manager.css?v=${h_version}">
    <link rel="stylesheet"href="${ctxPath}/static/doc/css/uploadList.css?v=${h_version}">
    <link rel="stylesheet" href="${ctxPath}/static/doc/css/frontResourceManager.css?v=${h_version}">
    <script type="text/javascript" charset="utf-8" src="${ctxPath}/static/resources/js/front/file-type-filter.js?v=${h_version}"></script>
    <style>
        .layui-table {
            width: calc(100% - 8px);
        }
    </style>
</head>
<body>
@include("/common/front-header-with-search.html"){}
@include("/common/front-rit.html"){}
<div class="mainCon container">
    <div class="row mainCon-in">
        <div class="col-sm-3 con-full-l leftBar">
            <div class="pims-tree" style="height: 100%">
                <div class="tree-box"  style="overflow-x: auto">
                    <div id="fileTree" class="jsTree"></div>
                </div>
            </div>
        </div>
        <div class=" col-sm-9 con-full-r rightArea">
            <div class="path-oper clearfix">
                <div id="upDiv" class="left">
                    <!--<img class="btnIcon" src="${ctxPath}/static/resources/img/fsfile/uplevelicon.png"><span id="upLevel" style="cursor: pointer;color:#3C91FD">返回上级</span>
                    &nbsp;|&nbsp;&nbsp;-->
                    <span id="upLevel">返回上级</span><label>|</label><i class="layui-icon control-btn-l">&#xe603;</i>
                    <div class="outer-nav"><span id="path"></span></div>
                </div>
                <i class="layui-icon control-btn-r">&#xe602;</i>
                <!--<div id="path" class="path"></div>-->
                <div class="search-wrapper">
                    <input class="search-input" id="searchInResult" placeholder="当前目录下按名称查找" value="">
                    <input  type="hidden" class="hide"  id="searchInResultValue" value="">
                    <div class="search-btn" id="searchInResultBtn">&nbsp;</div>
                </div>
                <button class="mlBtn">显示目录</button>
            </div>
            @include("/common/front-file-type.html"){}

            <div class="rit-menu clearfix">

                <div id="listStyle1" title="平铺模式" class="rit-menu1 rit-menus  fr"></div>
                <div id="listStyle2" title="列表模式" class="rit-menu2 rit-menus fr active"></div>
            </div>
            <div class="order-search clearfix">
                <ul class="order-type clearfix" id="orderType">
                    <li>
                        <label><input type="radio" class="radio-class" name="sortType" value="0" checked>按时间排序</label>
                    </li>
                    <li>
                        <label><input type="radio" class="radio-class" name="sortType" value="1">按名称排序</label>
                    </li>
                    <li>
                        <label><input type="radio" class="radio-class" name="sortType" value="2">按类型排序</label>
                    </li>
                </ul>
                <div class="docNum">共<span id="amount"></span>篇</div>
            </div><!--排序完结-->
            <div class="file-container-flatten">
                <div id="view"></div>
            </div>
            <!--<div id="pagelist" class="page-list"></div>-->
            <div id="laypageAre" class="page-list"></div>
        </div>
    </div>
    <input  type="hidden" class="hide"  id="initId" value="${id}"/>
    <input  type="hidden" class="hide"  id="initName" value="${fileName}"/>
</div>
<div class="integral"  ><span class="num" id="num"></span><span class="point">积分</span></div>
<script id="demo" type="text/html">
    <ul class="clearfix">
        {{#  layui.each(d.list, function(index, item){ }}
        <li class="file">
            <div class="right">
                {{#  if(item.fileType != 'folder'&&(item.authority==1||item.authority==2||d.adminFlag==1||noChildPower==2)){ }}
                <button onclick="iconDownLoad('{{item.fileId}}','{{item.fileName}}')" type='button' class='downloadBtn'>
                    下载
                </button>
                {{#  }else{ }}
                <button class="downloadBtn visHide">下载</button>
                {{#  } }}
            </div>
            {{# if(navigator.userAgent.indexOf('Android')!=-1||navigator.userAgent.indexOf('webOS')!=-1||navigator.userAgent.indexOf('iPhone')!=-1||navigator.userAgent.indexOf('iPod')!=-1||navigator.userAgent.indexOf('iPad')!=-1){   }}
            <a  data-id="{{item.fileId}}" onclick="dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')"  title="{{item.fileName}}">
            {{#  }else{ }}
            <a data-id="{{item.fileId}}"  title="{{item.fileName}}" ondblclick="dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')" onclick="clickOneTime(this,'{{item.fileId}}','{{item.fileType}}','{{item.fileName}}','{{index}}')"  >
            {{#  } }}

                <div  class="file-selection" >
                    <section class="icon">
                        {{#  if(item.fileType === 'folder'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/folder.png">
                        {{#  }else if(item.fileType === '.doc'||item.fileType === '.docx'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/word.png">
                        {{#  }else if(item.fileType === '.txt'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/txt.png">
                        {{#  }else if(item.fileType === '.ppt'||item.fileType === '.pptx'||item.fileType === '.ppsx'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/ppt.png">
                        {{#  }else if(item.fileType === '.pdf'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/pdf.png">
                        {{#  }else if(item.fileType === '.ceb'){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/ceb.png">
                        {{#  }else if(['.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi'].indexOf(item.fileType)!=-1){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/audio.png">
                        {{#  }else if(['.mp4','.avi','.AVI', '.wma', '.rmvb','.rm', '.flash'].indexOf(item.fileType)!=-1){ }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/video.png">
                        {{#  }else if(item.fileType === '.xls'||item.fileType === '.xlsx') {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/excel.png">
                        {{#  }else if(['.png','.gif','.jpg','.jpeg'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/picture.png">
                        {{#  }else if(['.bpm'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-bpm26.png">
                        {{#  }else if(['.psd'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-psd26.png">
                        {{#  }else if(['.zip','.rar'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/zip.png">
                        {{#  }else if(['.exe'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/exe.png">
                        {{#  }else if(['.html'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/html.png">
                        {{#  }else if(['.bmp'].indexOf(item.fileType)!=-1) {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/bmp.png">
                        {{#  }else {  }}
                        <img  src="${ctxPath}/static/resources/img/fsfile/other.png">
                        {{#  } }}
                    </section>
                    <section class="profile">
                        {{#
                            var sub = function(){
                                var result=item.fileName;
                                if(result.length>15){
                                    result=result.substring(0,14)+'...';
                                }
                                return result;
                            };
                        }}
                        <h1 id="name{{index}}" class="" >{{ sub() }}</h1>
                    </section>
                </div>
                 </a>
                {{#  if(item.fileType != 'folder'){ }}
                    <div class="condition">
                        <img src="${ctxPath}/static/resources/img/fsfile/downPic.png"/><span id="downNum{{ item.fileId }}" class="vertical"></span>&nbsp;&nbsp;
                        <img src="${ctxPath}/static/resources/img/fsfile/lookPic.png"/><span id="readNum{{ item.fileId }}" class="vertical"></span>&nbsp;&nbsp;
                        <span id="person{{ item.fileId }}" class="vertical"></span>
                    </div>
                {{#  } }}
            </a>
        {{#  }); }}
    </ul>
</script>
<script id="demo1" type="text/html">
    <div class="fixed-table-header view-table">
        <table class="layui-table table_list">
            <colgroup>
                <col>
                <col  width="160">
                <col width="120">
                <col  width="100">

            </colgroup>
            <thead>
            <tr>
                <th lay-data="{field:'filename'}" style="text-align: center">

                    文件名</th>

                <th lay-data="{field:'time'}" style="text-align: center">上传时间</th>

                <th lay-data="{field:'user'}" style="text-align: center">上传人</th>
                <th lay-data="{field:'size'}" style="text-align: center">大小</th>

            </tr>
            </thead>
        </table>
    </div>
    <table class="layui-table table_list" >
        <colgroup>
            <col>
            <col  width="160">
            <col width="120">
            <col  width="100">

        </colgroup>
        <thead>
        <tr>
            <th lay-data="{field:'filename'}" style="text-align: center">

                文件名</th>

            <th lay-data="{field:'time'}" style="text-align: center">上传时间</th>

            <th lay-data="{field:'user'}" style="text-align: center">上传人</th>
            <th lay-data="{field:'size'}" style="text-align: center">大小</th>

        </tr>
        </thead>
        <tbody>
        {{#  layui.each(d.list, function(index, item){ }}

        {{#
        var titlesub = function(){
        var result='';
        if(item.fileType!="folder"){
        result=item.fileName+item.fileType;
        }else{
        result=item.fileName
        }
        return result;
        };

        }}

        {{#
        var timesub = function(){
        var result=item.createTime;

        result=  result.substring(0,result.lastIndexOf(':'));

        return result;
        };

        }}
        <tr    class="hoverEvent"  ondblclick="dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')" title="{{titlesub()}}" >
            <td>

                <input  class="checkFileId" hidden value="{{item.fileId}}">
                <input  class="checkFileType" hidden value="{{item.fileType}}">
                <input  class="checkFileName" hidden value="{{item.fileName}}">
                <input  class="chooseFileAuthor" hidden value="{{item.createUserId}}">
                {{#  if(item.fileType === 'folder'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-folder26.png">
                {{#  }else if(item.fileType === '.doc'||item.fileType === '.docx'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-word26.png">
                {{#  }else if(item.fileType === '.txt'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-txt26.png">
                {{#  }else if(item.fileType === '.ppt'||item.fileType === '.pptx'||item.fileType === '.ppsx'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-ppt26.png">
                {{#  }else if(item.fileType === '.pdf'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-pdf26.png">
                {{#  }else if(item.fileType === '.ceb'){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-ceb26.png">
                {{#  }else if(['.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi'].indexOf(item.fileType)!=-1){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-audio26.png">
                {{#  }else if(['.mp4','.avi', '.wma', '.rmvb','.rm', '.flash'].indexOf(item.fileType)!=-1){ }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-video26.png">
                {{#  }else if(item.fileType === '.xls'||item.fileType === '.xlsx') {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-excel26.png">
                {{#  }else if(['.png','.jpeg','.gif','.jpg'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-img26.png">
                {{#  }else if(['.bmp'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-bmp26.png">
                {{#  }else if(['.psd'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-psd26.png">
                {{#  }else if(['.html'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-html26.png">
                {{#  }else if(['.exe'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-exe26.png">
                {{#  }else if(['.zip','.rar'].indexOf(item.fileType)!=-1) {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-zip26.png">
                {{#  }else {  }}
                <img  src="${ctxPath}/static/resources/img/front/file-icon/ic-other26.png">
                {{#  } }}
                {{#
                var sub = function(){
                var result='';
                if(item.fileType!="folder"){
                result=item.fileName+item.fileType;
                }else{
                result=item.fileName
                }


                return result;
                };

                }}
                <span id="name{{index}}" class="fileNameSpan"><a class="folderName" href="javascript:dbclick('{{item.fileId}}','{{item.fileType}}','{{item.fileName}}')">{{ sub() }}</a></span>
                {{#  if(item.fileType != 'folder'){     }}
                <span style="display:none" id="hoverSpan" class="hoverSpan">
                <span style="display: inline-block;float: right">
                    {{#  if(item.shareFlag == '1'){     }}
                  <a href="javascript:share('{{ item.fileId }}','{{item.fileType}}','{{item.fileName}}')">
                      <i class="layui-icon  " title="分享"  style="font-size: 13px;cursor: pointer">&#xe641;</i></a>
                    {{#  } }}
                        {{#  if(item.collection != ""){     }}
                    <i class="layui-icon cancelCollection" title="取消收藏" onclick="cancelCollection(this,'{{item.collection}}','{{item.fileId}}')" style="font-size: 14px;cursor: pointer;color:#FFAD5B">&#xe658;</i>
                     {{#  }else {  }}
                    <i class="layui-icon cancelCollection" title="收藏" onclick="collection(this,'{{item.fileId}}')" style="font-size: 14px;cursor: pointer;color:#FFAD5B">&#xe658;</i>

                    {{#  } }}
                     {{#  if(noChildPower == 2 || adminFlag==1  || item.authority == 1||  item.authority == 2 ){     }}
                  <a href="#" onclick="iconDownLoad('{{item.fileId}}','{{item.fileName}}');return false;">
                      <i class="layui-icon wenku-font wenku-font-download" title="下载" style="font-size: 13px;cursor: pointer"></i></a>
                    {{#  } }}
                    </span>
                </span>
                {{#  } }}
                <input type="text" id="inputName{{index}}"  maxlength="150"  value="{{item.fileName}}" class="layui-input hide">
            </td>
            <td style="text-align: center" > {{timesub()}}</td>
            <td style="text-align: center" >             {{# if(item.createUserName!=undefined&&item.createUserName!=''){   }}
                {{item.createUserName}}
                {{#  }else {  }}
                {{item.createUserId}}
                {{#  } }}</td>

            <td style="text-align: center">    {{#  if(item.fileType != 'folder'){     }}
                {{item.fileSize}}
                {{#  } }}</td>

            <span id="person{{ item.fileId }}" style="display: none;" class="vertical"></span>
            <span id="authority{{ item.fileId }}" style="display: none;" class="vertical"></span>
        </tr>
        {{#  }); }}
        </tbody>
    </table>

</script>
<script type="text/javascript"  src="${ctxPath}/static/doc/front/docmanager/js/front-resource-manager.js?v=${h_version}"></script>
</body>
</html>
