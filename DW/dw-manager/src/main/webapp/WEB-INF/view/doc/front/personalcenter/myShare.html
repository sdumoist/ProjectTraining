<head>
    @include("/common/front-style.html"){}
    @include("/common/plugins.html"){}
    @include("/common/plugins_ext.html"){}
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/personalcenter-common.css?v=${h_version}"/>
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/upload.css?v=${h_version}"/>
    <link rel="stylesheet" href="${ctxPath}/static/assets/lib/webuploader0.1.5/webuploader.css?v=${h_version}">
    <link rel="stylesheet"href="${ctxPath}/static/doc/css/uploadList.css?v=${h_version}">
    <script type="text/javascript" charset="utf-8" src="${ctxPath}/static/resources/js/ajaxfileupload.js?v=${h_version}"></script>
    <link href="${ctxPath}/static/resources/css/front/common_doc.css?v=${h_version}" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="${ctxPath}/static/doc/front/personalcenter/css/loading.css?v=${h_version}"/>
</head>
<style>
    .search-wrapper input{padding-right: 10px !important;}
    .table_list tbody>tr>td:first-child>span.nameTitpe{width: calc(100% - 150px) !important;}
</style>
<body>
<div class="background">
    <button id="copyContent" style="display: none"></button>
    <div class="content clearfix" id="uploadList">
        <div class="layui-col-md9 layui-col-sm9 con-full-r rightArea">
            <div id="marg" style="overflow: auto">
                <div class="table-top clearfix">
                    <div class="message"> 我的分享<span id="amount"></span></div>
                    <div class="search-wrapper">
                        <input class="search-input" id="searchName" placeholder="按名称查找文件或目录" value="">
                        <div class="search-btn" id="searchBtn">&nbsp;</div>

                        <!--<div class="search-btn" id="searchBtn">&nbsp;</div>-->
                    </div>
                    <div class="toolBar"  style="min-height: 50px">

                        <!--<button id="delHistoryBtn" class="layui-btn hideBtn clickBtn" ><i class="layui-icon">&#xea0f;</i>取消收藏</button>-->
                    </div>
                </div>
                <div class="fast-button">
                    <!--<button id="delHistoryBtn" class="layui-btn delRecord" >删除记录</button>-->
                    <!--<button id="clearHistoryBtn" class="layui-btn delRecord" >清空记录</button>-->
                    <div id="uploader" class="wu-example">
                        <div class="shadow">

                        </div>
                        <div id="dndArea">
                            <div class="file-container-flatten" id="">
                                <div id="view"></div>
                            </div>
                        </div>

                        <div id="picker" class="webuploader-container" style="display:none">
                            <div class="webuploader-pick layui-btn"><i class="layui-icon">&#xea0c;</i>上传</div>
                            <div id="rt_rt_1bchdejhrarjdvd11h41eoh1nt1">
                                <input id="file_bp" name="file"
                                       class="webuploader-element-invisible" type="file" /> <label ></label>
                            </div>
                        </div>
                        <div class="layui-card popWin success" style="display: none" >
                            <div class="layui-card-header">
                                <span style="font-size: 16px;margin-right: 10px;">上传最新版本</span>
                                <div class="fr">
                                    <!--<i class="iconfont controls-down">&#xe61a;</i>-->
                                    <!--<i class="iconfont controls-close">&#x1006;</i>-->
                                    <a class="layui-layer-ico layui-layer-close layui-layer-close2 controls-close" href="javascript:;"></a>
                                </div>
                                <span style="color: rgba(1, 1, 1, 0.44);">默认继承旧版本所有权限及下载预览量数据</span>
                            </div>
                            <div class="layui-card-body">
                                <!--<div class="success-msg"></div>-->
                                <div class="btns">
                                    <div class="uploader-list upload-head">
                                        <div  class="item" style="border-bottom: none!important;">
                                            <h4 class="info">文件名</h4>
                                            <h4 class="state">文件状态</h4>
                                        </div>
                                    </div>
                                    <!-- 文件列表：选择文件后在该div显示 -->
                                    <div id="thelist" class="uploader-list uploader-body list-group-item clearfix ng-hide" style="background-color: rgba(249,250,251,1);"></div>
                                    <label class="text-right"></label>
                                </div>
                            </div>
                            <button id="finish-btn" class="finish-btn layui-btn  " style="margin-right:20px;float: right; background-color: #3C91FD;color: white;width: 70px" onclick="returnList()">完成</button>
                        </div>
                    </div>
                </div>
                <div id="laypageAre"></div>
            </div>
        </div>
    </div>
</div>
<div class="noDataTip">未找到相关内容~</div>
<div class="integral"  ><span class="num" id="num"></span><span class="point">积分</span></div>
<div id="fileTree" class="jsTree" style="display: none"></div>
<div id="filTree" style="display: none;overflow: auto" class="leftArea">
    <div id="fileTree2" class="jsTree"></div>
</div>
<script id="demo1" type="text/html">
    <div class="fixed-table-header view-table">
        <table class="layui-table table_list">
            <colgroup>
                <col >
                <col width="180">
                <col width="120">
                <col width="120">
                <col width="180">
                <col width="120">
            </colgroup>
            <thead>
            <tr style="color: #8796AB;">
                <th onclick="orderByName()" lay-data="{field:'fileName'}" style="text-indent:5px;text-align: left;cursor: pointer;">
                    名称
                    <i class="layui-icon" id="orderName"style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png"></i>
                    <i class="layui-icon" id="orderName1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png"></i>
                </th>
                <th onclick="orderByTime()" lay-data="{field:'createTime'}" style="text-align: left;cursor: pointer;">
                    分享时间
                    <i class="layui-icon" id="orderTime"style="cursor: pointer ;font-size: 13px;display: none;">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png"></i>
                    <i class="layui-icon" id="orderTime1"  style="cursor: pointer ;font-size: 13px;display: none;">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png"></i>
                </th>
                <th onclick="orderBySize()" lay-data="{field:'fileSize'}" style="text-align: left;cursor: pointer">
                    文件大小
                    <i class="layui-icon" id="orderSize"style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png"></i>
                    <i class="layui-icon" id="orderSize1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png"></i>
                </th>
                <th onclick="orderByUser()" lay-data="{field:'userName'}" style="text-align: left;cursor: pointer">
                    上传人
                    <i class="layui-icon" id="orderUser"style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png"></i>
                    <i class="layui-icon" id="orderUser1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png"></i>
                </th>
                <th onclick="orderByValidTime()" lay-data="{field:'validTime'}" style="text-align: left;cursor: pointer">
                    失效时间
                    <i class="layui-icon" id="orderValidTime"style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1-blue.png"></i>
                    <i class="layui-icon" id="orderValidTime1"  style="cursor: pointer ;font-size: 13px;display: none">
                        <img class="file-order" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2-blue.png"></i>
                </th>
                <th  lay-data="{field:'view'}" style="text-align: left;cursor: pointer">
                    预览次数
                </th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="member-center-list">
        <table class="layui-table table_list" >
            <colgroup>
                <col >
                <col width="180">
                <col width="120">
                <col width="120">
                <col width="180">
                <col width="120">
            </colgroup>
            <!--        <thead>-->
            <!--        <tr style="color: #8796AB;">-->
            <!--            <th lay-data="{field:'fileName'}" style="text-align: left">-->
            <!--                &lt;!&ndash;<input  type="checkbox" class="checkAll" style="position: absolute;opacity: 0">&ndash;&gt;-->
            <!--                &lt;!&ndash;<div class="layui-unselect layui-form-checkbox" onclick="checkAll(this)"  style="float: left;font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px">&ndash;&gt;-->
            <!--                &lt;!&ndash;<i class="iconfont" style="width: 12px;font-size: 12px;" >&#xe605;</i>&ndash;&gt;-->
            <!--                &lt;!&ndash;</div>&ndash;&gt;-->
            <!--                名称-->
            <!--                &lt;!&ndash;<i class="layui-icon" onclick="getNameOrder()" id="" style="display: none;cursor: pointer ;font-size: 13px"> <img   style="margin-top: 4px;width:10px;height: auto"class="btnIcon" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1.png"></i>&ndash;&gt;-->
            <!--                &lt;!&ndash;<i class="layui-icon" onclick="getNameOrder1()" id=""  style="cursor: pointer ;font-size: 13px"><img   style="margin-top: 4px;width:10px;height: auto" class="btnIcon" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2.png"></i>&ndash;&gt;-->
            <!--            </th>-->
            <!--            <th lay-data="{field:'createTime'}" style="text-align: left">-->
            <!--                上传时间-->
            <!--                <i class="layui-icon" onclick="getTimeOrder()" id=""style="cursor: pointer ;font-size: 13px"><img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order1.png"></i>-->
            <!--                <i class="layui-icon" onclick="getTimeOrder1()" id=""  style="cursor: pointer ;font-size: 13px"><img style="width:10px;height: auto" src="${ctxPath}/static/resources/img/fsfile/authority/front-order2.png"></i>-->
            <!--            </th>-->
            <!--            <th lay-data="{field:'fileSize'}" style="text-align: left">-->
            <!--                文件大小-->
            <!--            </th>-->
            <!--            <th lay-data="{field:'userName'}" style="text-align: left">-->
            <!--                上传人-->
            <!--            </th>-->
            <!--        </tr>-->
            <!--        </thead>-->
            <tbody>
            {{#  layui.each(d.list, function(index, item){ }}
            {{#
            var titlesub = function(){
            var result='';
            if(item.docType!="folder"){
            result=item.fileName+item.docType;
            }else{
            result=item.fileName
            }
            return result;
            };

            }}
            {{# if(null != item.fileName){}}
            <tr class="hoverEvent" ondblclick="dbclick('{{item.docId}}','{{item.docType}}','{{item.fileName}}')"  onclick="clickCheck(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')">
                <td>
                    <!--<input type="checkbox" class="checkbox"  name="checkboxname"  onclick="tryPop(this,'{{item.id}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')" style="position: absolute;opacity: 0" >-->
                    <!--<div class="layui-unselect layui-form-checkbox"  style="font-size: 12px;line-height: 12px;width: 14px;height: 14px;padding-right:12px" onclick="clickIconCheck(this,'{{item.id}}','{{item.fileType}}','{{item.fileName}}','{{index}}','{{item.createUserId}}')">-->
                    <!--<i class="iconfont" style="width: 12px;font-size: 12px;" >&#xe605;</i>-->
                    <!--</div>-->
                    <!--<input  class="checkFileId" hidden value="{{item.fileId}}">-->
                    <input  class="checkFileType" hidden value="{{item.docType}}">
                    <!--<input  class="checkFileName" hidden value="{{item.fileName}}">-->
                    <!--<input  class="chooseFileAuthor" hidden value="{{item.createUserId}}">-->
                    <!--<input id="{{item.fileId}}" value="{{index}}"hidden>-->
                    {{#  if(item.docType === 'folder'){ }}
                    <img class="folder-img" src="${ctxPath}/static/resources/img/fsfile/folder_member1.png">
                    {{#  }else if(item.docType === '.doc'||item.docType === '.docx'){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/word.png">
                    {{#  }else if(item.docType === '.txt'){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/txt.png">
                    {{#  }else if(item.docType === '.ppt'||item.docType === '.pptx'||item.docType === '.ppsx'){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ppt.png">
                    {{#  }else if(item.docType === '.pdf'){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pdf.png">
                    {{#  }else if(item.docType === '.ceb'){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/ceb.png">
                    {{#  }else if(['.CD','.OGG','.mp3','.real','.cd','.ogg','.asf','.wav','.ape','.module','.midi'].indexOf(item.docType)!=-1){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/music.png">
                    {{#  }else if(['.mp4','.avi', '.wma', '.rmvb','.rm', '.flash'].indexOf(item.docType)!=-1){ }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/video.png">
                    {{#  }else if(item.docType === '.xls'||item.docType === '.xlsx') {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/excel.png">
                    {{#  }else if(['.png','.jpeg','.gif','.jpg','.bmp'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/pic.png">
                    {{#  }else if(['.zip','.rar'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/rar.png">
                    {{#  }else if(['.exe'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/exe.png">
                    {{#  }else if(['.psd'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/psd.png">
                    {{#  }else if(['.html'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/html.png">
                    {{#  }else if(['.bmp'].indexOf(item.docType)!=-1) {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/bmp.png">
                    {{#  }else {  }}
                    <img  src="${ctxPath}/static/resources/img/front/file-iconNew/other.png">
                    {{#  } }}
                    {{#
                    var sub = function(){
                    if(item.docType != 'folder'){
                    var result=item.fileName + item.docType;

                    return result;
                    } else{
                    var result=item.fileName ;
                    return result;
                    }
                    }
                    }}
                    {{#
                    var validTime = function(){
                    if(item.effectiveDays == '永久'){
                    var result = '永久';
                    return result;
                    } else{
                    var result=item.validTime ;
                    return result;
                    }
                    }
                    }}
                    <span id="name{{index}}"  class ="nameTitpe nofolder" title="{{sub()}}" style="cursor: default" ><a class="fileName" onclick="dbclick('{{item.docId}}','{{item.docType}}','{{item.fileName}}')">{{ sub() }}</a></span>
                    <span style="display: none" id="hoverSpan" class="hoverSpan">
                    <span style="display: inline-block;float: right">
                    <i class="layui-icon layui-layer-btn3" id="copyShare" title="复制分享链接"  onclick="copyShare('{{item.mappingUrl}}','{{item.pwdFlag}}','{{item.password}}','{{item.createTime}}','{{item.validTime}}')" style="font-size: 14px ;cursor: pointer">&#xe64c;</i>
                        <!--                        <i class="layui-icon" title="取消分享"  onclick="cancelShare('{{item.shareId}}')" style="font-size: 14px ;cursor: pointer">&#xe641;</i>-->
                        <span class="cancel-share-icon" title="取消分享" onclick="cancelShare('{{item.shareId}}')"></span>
                         {{#  if(item.docType != 'folder'){ }}
                   <i class="layui-icon wenku-font wenku-font-download" title="下载" onclick="iconDownLoad('{{item.docId}}','{{item.fileName}}')" style="font-size: 14px;cursor: pointer"></i>
    {{#  } }}
                        <!--  <i class="layui-icon clickEvent" title="更多"  style="font-size: 16px;cursor: pointer" >&#xe65f;</i>
                          <input class="index" hidden value="{{index}}">
                          <div  class="moreicon" >
                              <p onclick="iconSetAuthority(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置权限</p>
                              <p onclick="iconSetTip(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{item.createUserId}}')"> 设置标签</p>
                              <p onclick="shareSetting(this,'{{item.docId}}')"> 设置分享</p>
                              <p onclick="iconMove(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{item.createUserId}}')"> 移动</p>
                              <p onclick="iconDelete(this,'{{item.docId}}','{{item.fileName}}')"> 删除</p>
                              <p onclick="iconUpdateName(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{item.createUserId}}','{{index}}')"> 重命名</p>
                              <p onclick="iconUploadVersion(this,'{{item.docId}}','{{item.foldId}}')"> 上传最新版本</p>
                              <p onclick="iconViewVersion(this,'{{item.docId}}','{{item.docType}}','{{item.fileName}}','{{item.createUserName}}','{{item.createTime}}','{{item.fileSize}}')"> 查看历史版本</p>

                          </div>-->
                    </span>
                </span>
                    <input type="text" id="inputName{{index}}" style="width:93%;float:right;margin-right: 5px"  maxlength="30"  value="{{item.fileName}}" class="layui-input hide ishover">
                </td>
                <td>
                    {{item.createTime.substring(0,item.createTime.lastIndexOf(':'))}}
                </td>
                <td>
                    {{item.fileSize}}
                </td>
                <td>
                    {{item.userName}}
                </td>
                <td >
                    {{validTime()}}
                </td>
                <td >
                    {{#  if(item.docType != 'folder'){ }}
                    {{item.view}}次
                    {{#  } }}
                </td>
                <span id="person{{ item.docId }}" style="display: none;" class="vertical"></span>
                <span id="authority{{ item.docId }}" style="display: none;" class="vertical"></span>
            </tr>
            {{#  }}}
            {{#  }); }}
            </tbody>
        </table>
    </div>
</script>
<script src="${ctxPath}/static/assets/lib/webuploader0.1.5/webuploader.nolog.version.js?v=${h_version}"></script>
<script src="${ctxPath}/static/assets/lib/jsTree/jstree.js?v=${h_version}"></script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/resources/js/ajaxfileupload.js?v=${h_version}"></script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/personalcenter/js/loading.js?v=${h_version}"></script>
<script  src="${ctxPath}/static/doc/front/preview/js/clipboard.min.js?v=${h_version}"></script>
<script type="text/javascript" charset="utf-8" src="${ctxPath}/static/doc/front/personalcenter/js/my-share.js?v=${h_version}"></script>
<script>
    var width = $(window).width();
</script>
<script language="javascript">

    setInterval(function () {
        var h=$("#uploadList").height()+50;

        $(window.parent.document).find("iframe[id='myIframe']").height(h);
    },100)

</script>
</body>
