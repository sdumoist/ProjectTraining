<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jxdinfo.doc.manager.middlegroundConsulation.dao.ConsulationAttachmentMapper">

    <select id="getAttachmentList" resultType="com.jxdinfo.doc.manager.middlegroundConsulation.model.MiddlegroundConsulationAttachment">
        SELECT
        a.attachment_id attachmentId,
        a.attachment_type attachmentType,
        a.attachment_name attachmentName,
        di.doc_type fileType,
            ff.file_size fileSize
        FROM
        consulation_attachment a left join doc_info di on di.doc_id = a.attachment_id
        LEFT JOIN fs_file ff ON di.file_id = ff.file_id
        WHERE 1=1 and a.consulation_id =#{consulationId}
        order by a.attachment_type
    </select>

    <delete id="deleteByConsulationId">
        DELETE FROM consulation_attachment WHERE consulation_id = #{consulationId}
    </delete>
</mapper>