<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jxdinfo.doc.manager.docintegral.dao.ExemptIntegralMapper">
<select id="show" resultType="com.jxdinfo.doc.manager.docintegral.model.ExemptIntegral">

     SELECT
	dff.doc_id docId,
	dff.file_id fileId,
	ff.file_name fileName,
	dff.doc_name docName,
	dff.create_time createTime,
	dff.file_type fileType
FROM
	doc_free_file dff
	LEFT JOIN fs_file ff ON dff.doc_id = ff.file_id
WHERE
	1 =1
	<if test="title != ''and title != null">
		AND  dff.doc_name LIKE CONCAT('%',#{title},'%')
	</if>
	order by dff.create_time desc
     LIMIT #{beginIndex}, #{limit}

</select>

     <select id="showCount" resultType="int">

           SELECT count(*) FROM doc_free_file dff left join fs_file ff on dff.doc_id=ff.file_id
		 WHERE
		 1 =1
		 <if test="title != ''and title != null">
			 AND  ff.file_name LIKE CONCAT('%',#{title},'%')
		 </if>
     </select>
	<select id="addCheck" resultType="com.jxdinfo.doc.manager.docintegral.model.ExemptIntegral">
		SELECT * FROM `doc_free_file` where doc_id in
		<foreach item="idItem" collection="ids" open="(" separator="," close=")">
			#{idItem}
		</foreach>
	</select>

</mapper>
